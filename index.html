<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crop Calculator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/exif-js"></script>
  <script src="https://unpkg.com/interactjs/dist/interact.min.js"></script>
  <style>
    .preview-img {
      user-drag: none;  
      user-select: none;
      -moz-user-select: none;
      -webkit-user-drag: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      max-width: 100%;
    }
    .resize-drag {
      position: absolute;
      width: 50%;
      height: 50%;
      padding: 20px;
      margin: 0;
      background-color: #2299ee;
      color: white;
      font-size: 20px;
      font-family: sans-serif;
      opacity: 0.6;
      touch-action: none;
      white-space: nowrap;
      box-sizing: border-box;
      text-shadow:
      1px 1px 0 #000,
      -1px 1px 0 #000,
      -1px -1px 0 #000,
      1px -1px 0 #000;
    }
  </style>
</head>
<body>
  <div class="container mt-3">
    <div class="row mb-4 justify-content-center">
      <div class="col-md-12 mt-3 mt-md-0">
        <h2>Crop info</h2>
        <p>Select a full—not cropped—image with EXIF data from your device, and resize/drag the box around to get an aproximate value in mega pixels and equivalent focal length for that crop in 35mm.</p>
        <p>(Images stay on your device, they are not uploaded anywhere)</p>
        <div class="mb-3">
          <input type="file" name="custom_file" id="custom_file">
        </div>

        <div class="mb-3">
          <div style="position: relative;background-color: #dee2e6;">
            <img id="full-image" class="invisible preview-img" alt="your img" >
            <div id="crop_box" class="resize-drag invisible" style="transform: translate(0px, 0px);" data-x="0" data-y="0"></div> 
          </div>
        </div>

        <div class="row">
          <div class="col-sm-3 mb-4">
            <label for="aspect_ratio" class="form-label">Aspect ratio</label>
            <select class="form-control" id="aspect_ratio" name="aspect_ratio">
              <option value="0">Original</option>
              <option value="1">1:1</option>
              <option value="1">7:6</option>
              <option value="1.25">5:4</option>
              <option value="1.333333333333333">4:3</option>
              <option value="1.5">3:2</option>
              <option value="1.777777777777778">16:9</option>
              <option value="1.91">1.91:1</option>
              <option value="2">2:1</option>
              <option value="2.33">21:9</option>
              <option value="2.39">2.39:1</option>
              <option value="3.555555555555555">32:9</option>
            </select>
          </div>

          <div class="col-sm-3 mb-4 mt-5">
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="checkbox" value="" id="portrait">
              <label class="form-check-label" for="portrait">
                Rotate
              </label>
            </div>
          </div>

          <div class="col-sm-3 mb-4">
            <label for="custom_crop_factor" class="form-label">Crop factor:</label>
            <input type="number" class="form-control" id="custom_crop_factor">
          </div>

          <div class="col-sm-3 mb-4">
              <label for="crop_color" class="form-label">Color:</label>
              <input type="color" class="form-control form-control-color" id="crop_color" value="#2299ee" title="Choose your color">
          </div>

        </div>
      </div>
    </div>
  </div>
  <script>
    eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('a 1U=$(\'#1X-26\');a l=$(\'#l\');l.Z("23","38");a 1H=$("#1H");a S=0;a O=0;a P=0;a v=0;a z=0;a M=0;a 1a=0;a 13=0;a X=0;a 15=1;a t=28;a 1G=1Z;a o=1;a 1v=0;a L=0;a F=0;a 1q=0;G 1s=R.B.1R({2t:1,2R:m,B:[R.B.2S({2T:{u:10,D:10},2U:\'1w\'}),R.B.2V({2W:\'1w\',2m:m}),],});$("#2Q").T(b(e){l.Z("2X-2Z",$(j).Q())});$("#o").T(b(e){1d()});$("#1r").T(b(e){F=1E($(j).Q());t=L*F;14(z,v);a i=z+\'\\1I\'+v;i+="<q>"+S;i+="<q> H.K: "+O;i+="<q> V.K: "+P;l.1z(i)});$("#30").T(b(e){1G=$(j).31(\'32\');1d()});b 1R(){p o};b 14(w,h){S=((w*h)/33).1x(2)+" 34";a 1u=(M/w);a 1A=(1a/h);a 2a=1u*t;a 2b=1A*t;O=(A.19(2a)+"1y ("+(1u*((t/L))).1x(2)+"x)");P=(A.19(2b)+"1y ("+(1A*((t/L))).1x(2)+"x)")};b 1T(E){M=E.2O;1a=E.2P;13=$(E).u();X=$(E).D();a 27=$(E).u();15=M/27;1v=13/X};1H.2z("T",b(d){a 1t=2B.2C(\'1X-26\');1t.2y=b(){a 1P=j;g.2E(d.c.1V[0],b(){a 1S=g.k(j,"2G");a 1Q=g.k(j,"2H");a 1N=g.k(j,"2I");a 1J=g.k(j,"2J");a U=g.k(j,"2K");L=g.k(j,"2e");a 1C=g.k(j,"2L");1U.21("1W");l.21("1W");1T(1P);1b(17 U!=="16"){t=U;$("#1r").Q(1p(U/L))}2s{t=2c(j)}1d().1g(r=>20());29.22(`${1S}${1Q},${1N}s f${1J}${t}1y 1C${1C}`);29.22(g.3k(j))})};1t.3h=3g.3e(d.c.1V[0])});b 20(){l.1Y("n-x",13/4);l.1Y("n-y",-X);p C().1g(b(r){l.Z("u","28%");p C().1g(b(r){a i=z+\'\\1I\'+v;i+="<q>"+S;i+="<q> H.K: "+O;i+="<q> V.K: "+P;l.1z(i);l.Z("23","3a");p r})})};b 2c(e){G 2k=36;G 3q=24;G 1l=g.k(e,"3r");a 1o=17 1l!=="16"&&1l===3?m:1Z;a 1L=g.k(e,"3v");a 1O=g.k(e,"2M");a 1m=g.k(e,"2x");a 1n=g.k(e,"3u");a 1K=17 1m!=="16"?1m:M;a 1M=17 1n!=="16"?1n:1a;a 2w=(1K/1L)*(1o?10:25.4);a 37=(1M/1O)*(1o?10:25.4);1q=g.k(e,"2e");F=1p(2k/2w);$("#1r").Q(F);a 2d=F*1q;p 1E(2d)}b 1p(N){a 2n=[6,5.6,4.8,4.6,4.5,3.9,2.7,1.3d,2,1.7,1.6,1.5,1.3,1,0.3b,0.3l];a 11=2n.3t(b(1j,1k){p(A.1i(1k-N)<A.1i(1j-N)?1k:1j)});G 2u=0.3m;1b(A.1i(11-N)>2u)11=N;p 11};b 1f(d){a c=d.c;a x=(1h(c.18(\'n-x\'))||0)+d.3j;a y=(1h(c.18(\'n-y\'))||0)+d.3i;c.1e.2i=\'2j(\'+x+\'I, \'+y+\'I)\';c.12(\'n-x\',x);c.12(\'n-y\',y);a 1c=d.J.u;a W=d.J.D;14(1c,W)};1D.1f=1f;G Y=R(\'#l\');Y.3f({2o:{1B:m,3c:m,2p:m,2h:m},2v:{2l(d){a c=d.c;a x=(1h(c.18(\'n-x\'))||0);a y=(1h(c.18(\'n-y\'))||0);c.1e.u=d.J.u+\'I\';c.1e.D=d.J.D+\'I\';x+=d.2g.1B;y+=d.2g.2h;c.1e.2i=\'2j(\'+x+\'I,\'+y+\'I)\';c.12(\'n-x\',x);c.12(\'n-y\',y);a 1c=d.J.u;a W=d.J.D;z=A.19(1c*15);v=A.19(W*15);14(z,v);a i=z+\'\\1I\'+v;i+="<q>"+S;i+="<q> H.K: "+O;i+="<q> V.K: "+P;$(c).1z(i)}},B:[1s,],3n:\'3o\',2f:m}).3p({2v:{3s(d){},2l:1D.1f},2f:m,B:[R.B.39({2Y:\'1w\',2m:m})]});b C(){p Y.C({2q:\'2r\',2o:{1B:m,2p:m}}).1g(r=>Y.C({2q:"2D",2A:\'2N\'}))};1D.2F(\'2r\',C);b 1d(){a e=$("#o");a 1F=$(e).Q();1b(1F==="0"){o=1v}2s{o=1E(1F)}1b(1G){o=(1/o)}1s.35.2t=o;p C()};',62,218,'||||||||||var|function|target|event|||EXIF||content|this|getTag|crop_box|true|data|aspect_ratio|return|br|||lensFocalLength|width|crop_height||||crop_width|Math|modifiers|reflow|height|img|camera_crop_factor|const||px|rect|FOV|original_focal_length|effective_image_width|value|h_mm_h|h_mm_v|val|interact|h_mp|change|focal35||rect_height|image_height|box|css||actual_factor|setAttribute|image_width|updateHiddenInputs|resize_factor|undefined|typeof|getAttribute|round|effective_image_height|if|rect_width|updateAspectRatio|style|dragMoveListener|then|parseFloat|abs|prev|curr|res_units|xpix|ypix|res_in_cm|getMappedCropFactor|exif_focal|custom_crop_factor|preserveRatio|output|h_crop|original_aspect_ratio|parent|toFixed|mm|html|v_crop|left|ISO|window|Number|tmp_ratio|portrait_mode|custom_file|u00D7|aperture|sensor_res_x|xres|sensor_res_y|exposure|yres|that|model|aspectRatio|make|initVars|bg_image|files|invisible|full|attr|false|boxReposition|removeClass|log|visibility|||image|display_w|50|console|eq_w|eq_h|getFullFrameEquivalentFocalLength|equivalent_focal|FocalLength|inertia|deltaRect|top|transform|translate|width_35mm|move|endOnly|factors|edges|bottom|name|resize|else|ratio|threshold|listeners|h_mm|PixelXDimension|onload|on|axis|document|getElementById|drag|getData|addEventListener|Make|Model|ShutterSpeedValue|ApertureValue|FocalLengthIn35mmFilm|ISOSpeedRatings|FocalPlaneYResolution|xz|naturalWidth|naturalHeight|crop_color|enabled|restrictSize|min|max|restrictEdges|outer|background|restriction|color|portrait|prop|checked|1000000|MP|options||v_mm|hidden|restrictRect|visible|79|right|84|createObjectURL|resizable|URL|src|dy|dx|getAllTags|64|05|invert|none|draggable|height_35mm|FocalPlaneResolutionUnit|start|reduce|PixelYDimension|FocalPlaneXResolution'.split('|')))
  </script>
</body>
</html>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crop Calculator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/exif-js"></script>
  <script src="https://unpkg.com/interactjs/dist/interact.min.js"></script>
  <style>
    .preview-img {
      user-drag: none;  
      user-select: none;
      -moz-user-select: none;
      -webkit-user-drag: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      max-width: 100%;
    }
    .resize-drag {
      position: absolute;
      width: 50%;
      height: 50%;
      padding: 20px;
      margin: 0;
      background-color: #2299ee;
      color: white;
      font-size: 20px;
      font-family: sans-serif;
      opacity: 0.6;
      touch-action: none;
      white-space: nowrap;
      box-sizing: border-box;
      text-shadow:
      1px 1px 0 #000,
      -1px 1px 0 #000,
      -1px -1px 0 #000,
      1px -1px 0 #000;
    }
  </style>
</head>
<body>
  <div class="container mt-3">
    <div class="row mb-4 justify-content-center">
      <div class="col-md-12 mt-3 mt-md-0">
        <h2>Crop info</h2>
        <p>Select a full—not cropped—image from your device and resize/drag the box around to get an aproximate value in mega pixels and equivalent focal length for that crop in 35mm.</p>
        <p>(Images stay on your device, they are not uploaded anywhere)</p>
        <div class="mb-3">
          <input type="file" name="custom_file" id="custom_file">
        </div>

        <div class="mb-3">
          <div style="position: relative;background-color: #dee2e6;">
            <img id="full-image" class="invisible preview-img" alt="your img" >
            <div id="crop_box" class="resize-drag invisible" style="transform: translate(0px, 0px);" data-x="0" data-y="0"></div> 
          </div>
        </div>

        <div class="row">
          <label for="aspect_ratio" class="col-sm-4 col-form-label">Aspect ratio</label>
          <div class="col-sm-12 mb-4">
            <select class="form-control" id="aspect_ratio" name="aspect_ratio">
              <option value="0">Original</option>
              <option value="1">1:1</option>
              <option value="1.25">5:4</option>
              <option value="1.333333333333333">4:3</option>
              <option value="1.5">3:2</option>
              <option value="1.777777777777778">16:9</option>
              <option value="1.91">1.91:1</option>
              <option value="2">2:1</option>
              <option value="2.33">21:9</option>
              <option value="2.39">2.39:1</option>
              <option value="3.555555555555555">32:9</option>
            </select>
          </div>

          <div class="col-sm-12 mb-4">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="portrait">
              <label class="form-check-label" for="portrait">
                Rotate
              </label>
            </div>
          </div>

          <div class="col-sm-12 mb-4">
              <label for="exampleColorInput" class="form-label">Crop window color</label>
              <input type="color" class="form-control form-control-color" id="crop_color" value="#2299ee" title="Choose your color">
          </div>

        </div>
      </div>
    </div>
  </div>
  <script>
    eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('a 1Y=$(\'#20-1Z\');a l=$(\'#l\');l.X("27","33");a 1q=$("#1q");a P=0;a 16=0;a R=0;a L=0;a K=0;a I=0;a Q=0;a U=0;a 13=0;a W=1;a t=22;a 1m=1M;a o=1;a 1j=0;a 19=0;a 1v=0;E 1y=J.u.1I({2t:1,2J:j,u:[J.u.2H({2G:{q:10,A:10},2F:\'1z\'}),J.u.2C({2D:\'1z\',2p:j}),],});$("#2w").1a(c(e){l.X("2E-31",$(k).2c())});$("#o").1a(c(e){1c()});$("#30").1a(c(e){1m=$(k).2Z(\'2Y\');1c()});c 1I(){p o};c 1A(x,y,w,h){P=((w*h)/2R).1g(2)+" 2V";a 1p=(I/w);a 1r=(Q/h);a 1D=1p*t;a 1K=1r*t;16=(v.Y(1D)+"1u ("+(1p*((t/19))).1g(2)+"x)");R=(v.Y(1K)+"1u ("+(1r*((t/19))).1g(2)+"x)")};c 1V(D){I=D.2P;Q=D.2Q;U=$(D).q();13=$(D).A();a 26=$(D).q();W=I/26;1j=U/13};1q.2S("1a",c(d){a 1w=2T.2N(\'20-1Z\');1w.2X=c(){a 1U=k;g.2L(d.b.1S[0],c(){a 1R=g.i(k,"2M");a 1Q=g.i(k,"2K");a 1P=g.i(k,"2x");a 1O=g.i(k,"2y");a 1x=g.i(k,"2z");19=g.i(k,"1E");a 1t=g.i(k,"2B");1Y.1W("1N");l.1W("1N");1V(1U);t=N 1x!=="M"?1x:1X(k);1c().17(r=>1T());1L.23(`${1R}${1Q},${1P}s f${1O}${t}1u 1t${1t}`);1L.23(g.3p(k))})};1w.3s=3m.3u(d.b.1S[0])});c 1T(){l.21("m-x",U/4);l.21("m-y",-13);p z().17(c(r){l.X("q","22%");p z().17(c(r){a n=K+\'\\2i\'+L;n+="<C>"+P;n+="<C> H.O: "+16;n+="<C> V.O: "+R;l.2k(n);l.X("27","3l");p r})})};c 1X(e){E 1H=36;E 3j=24;E 1o=g.i(e,"3i");a 1s=N 1o!=="M"&&1o===3?j:1M;a 1J=g.i(e,"3k");a 1F=g.i(e,"3f");a 1d=g.i(e,"3e");a 1n=g.i(e,"3d");a 1C=N 1d!=="M"?1d:I;a 1G=N 1n!=="M"?1n:Q;a 28=(1C/1J)*(1s?10:25.4);a 38=(1G/1F)*(1s?10:25.4);a 2a=g.i(e,"1E");1v=29(1H/28);a 2q=1v*2a;p 2r(2q)}c 29(G){a 2u=[6,5.6,4.8,4.6,4.5,3.9,2.7,1.37,2,1.7,1.6,1.5,1.3,1,0.39,0.3a];a Z=2u.3b(c(1h,1i){p(v.1e(1i-G)<v.1e(1h-G)?1i:1h)});E 2j=0.3c;1l(v.1e(Z-G)>2j)Z=G;p Z};c 18(d){a b=d.b;a x=(12(b.S(\'m-x\'))||0)+d.3g;a y=(12(b.S(\'m-y\'))||0)+d.3h;b.14.2h=\'2b(\'+x+\'B, \'+y+\'B)\';b.15(\'m-x\',x);b.15(\'m-y\',y);a 11=d.F.q;a T=d.F.A;1A(x,y,11,T)};1k.18=18;E 1b=J(\'#l\');1b.35({2n:{1B:j,3o:j,2m:j,2g:j},2o:{2s(d){a b=d.b;a x=(12(b.S(\'m-x\'))||0);a y=(12(b.S(\'m-y\'))||0);b.14.q=d.F.q+\'B\';b.14.A=d.F.A+\'B\';x+=d.2f.1B;y+=d.2f.2g;b.14.2h=\'2b(\'+x+\'B,\'+y+\'B)\';b.15(\'m-x\',x);b.15(\'m-y\',y);a 11=d.F.q;a T=d.F.A;K=v.Y(11*W);L=v.Y(T*W);1A(x,y,K,L);a n=K+\'\\2i\'+L;n+="<C>"+P;n+="<C> H.O: "+16;n+="<C> V.O: "+R;$(b).2k(n)}},u:[1y,],3n:\'3r\',2e:j}).3q({2o:{3t(d){},2s:1k.18},2e:j,u:[J.u.34({2I:\'1z\',2p:j})]});c z(){p 1b.z({2l:\'2d\',2n:{1B:j,2m:j}}).17(r=>1b.z({2l:"2A",2W:\'2U\'}))};1k.32(\'2d\',z);c 1c(){a e=$("#o");a 1f=$(e).2c();1l(1f==="0"){o=1j}2O{o=2r(1f)}1l(1m){o=(1/o)}1y.2v.2t=o;p z()};',62,217,'||||||||||var|target|function|event|||EXIF||getTag|true|this|crop_box|data|content|aspect_ratio|return|width|||lensFocalLength|modifiers|Math||||reflow|height|px|br|img|const|rect|value||effective_image_width|interact|crop_width|crop_height|undefined|typeof|FOV|h_mp|effective_image_height|h_mm_v|getAttribute|rect_height|image_width||resize_factor|css|round|actual_factor||rect_width|parseFloat|image_height|style|setAttribute|h_mm_h|then|dragMoveListener|original_focal_length|change|box|updateAspectRatio|xpix|abs|tmp_ratio|toFixed|prev|curr|original_aspect_ratio|window|if|portrait_mode|ypix|res_units|h_crop|custom_file|v_crop|res_in_cm|ISO|mm|camera_crop_factor|output|focal35|preserveRatio|parent|updateHiddenInputs|left|sensor_res_x|eq_w|FocalLength|yres|sensor_res_y|width_35mm|aspectRatio|xres|eq_h|console|false|invisible|aperture|exposure|model|make|files|boxReposition|that|initVars|removeClass|getFullFrameEquivalentFocalLength|bg_image|image|full|attr|50|log|||display_w|visibility|h_mm|getMappedCropFactor|focal|translate|val|resize|inertia|deltaRect|top|transform|u00D7|threshold|html|name|bottom|edges|listeners|endOnly|equivalent_focal|Number|move|ratio|factors|options|crop_color|ShutterSpeedValue|ApertureValue|FocalLengthIn35mmFilm|drag|ISOSpeedRatings|restrictEdges|outer|background|max|min|restrictSize|restriction|enabled|Model|getData|Make|getElementById|else|naturalWidth|naturalHeight|1000000|on|document|xz|MP|axis|onload|checked|prop|portrait|color|addEventListener|hidden|restrictRect|resizable||84|v_mm|79|64|reduce|05|PixelYDimension|PixelXDimension|FocalPlaneYResolution|dx|dy|FocalPlaneResolutionUnit|height_35mm|FocalPlaneXResolution|visible|URL|invert|right|getAllTags|draggable|none|src|start|createObjectURL'.split('|'),0,{}))
  </script>
</body>
</html>